machine:
  environment:
    PYTHONPATH: "/home/ubuntu:$PYTHONPATH"
  python:
    version: 3.5.0
dependencies:
  pre:
    - git clone git@github.com:woolfson-group/dependencies_for_isambard.git
    # Scwrl
    - chmod +x /home/ubuntu/isambard_dev/dependencies_for_isambard/scwrl/install_Scwrl4_Linux
    - /home/ubuntu/isambard_dev/dependencies_for_isambard/scwrl/install_Scwrl4_Linux < /home/ubuntu/isambard_dev/dependencies_for_isambard/scwrl/scwrl_install.txt
    # Reduce
    - chmod +x /home/ubuntu/isambard_dev/dependencies_for_isambard/reduce/reduce.3.23.130521.linuxi386
    # DSSP
    - chmod +x /home/ubuntu/isambard_dev/dependencies_for_isambard/dssp/dssp-2.0.4
    # GOAP
    - gunzip /home/ubuntu/isambard_dev/dependencies_for_isambard/goap/fort.31_g72_noshift5_new.gz
    - gunzip /home/ubuntu/isambard_dev/dependencies_for_isambard/goap/fort.21_1.61_2.gz
    - chmod +x /home/ubuntu/isambard_dev/dependencies_for_isambard/goap/goap
    - pip install --upgrade pip
  override:
    - pip install -r requirements.txt
test:
  override:
    - cd /home/ubuntu/isambard_dev
    - python isambard_dev/configure.py -C
    - nosetests unit_tests/ --with-coverage  --cover-package=isambard_dev
  post:
    - bash <(curl -s https://codecov.io/bash) -t dbf3a333-e731-4885-ba4e-84514bc993c0
